---
# Launches an app if its PID file doesn't exist or is stale

- name: check if process is running
  shell: ps p `cat {{ pid_file }}` executable=/bin/bash
  ignore_errors: true
  failed_when: false
  changed_when: false
  register: pid_result

- name: start process
  command: "{{ start_command }}"
  when: pid_result|failed
